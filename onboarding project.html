<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cloudnix Onboarding Wizard</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Poppins:400,600&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #2563eb; /* Blue */
      --primary-600: #2563eb;
      --primary-700: #1d4ed8;
      --primary-800: #1e40af;
      --soft-bg: #eaf6ff; /* light sky blue background */
      --muted: #6b7280;
      --card-border: #e5e7eb;
      --success: #16a34a;
      --warning: #f59e0b;
    }

    html, body { height: 100%; }
    body {
      font-family: 'Poppins', Arial, sans-serif;
      background: var(--soft-bg);
      color: #111827;
      margin: 0;
    }

    .wizard-wrap {
      max-width: 1120px;
      margin: 32px auto 56px;
      padding: 0 16px;
    }

    .wizard-card {
      background: #fff;
      border-radius: 18px;
      box-shadow: 0 6px 36px rgba(0,0,0,0.07);
      padding: 28px 24px 24px 24px;
    }

    .progress { height: 8px; background: #e5e7eb; border-radius: 6px; }
    .progress-bar { background: var(--primary-600); }

    .step-section { display: none; }
    .step-section.active { display: block; animation: fadeIn 240ms ease-out; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px);} to { opacity: 1; transform: none; } }

    /* Step 1 */
    .theme-card { border: 2px solid var(--card-border); border-radius: 14px; overflow: hidden; transition: border .2s, box-shadow .2s; height: 100%; }
    .theme-card:hover { border-color: var(--primary-600); box-shadow: 0 6px 20px rgba(29,78,216,0.12); }
    .theme-card.selected { border-color: var(--primary-600); box-shadow: 0 8px 22px rgba(29,78,216,0.18); }
    .theme-img { width: 100%; height: 180px; object-fit: cover; background: #eef2ff; }
    .apply-btn { border-radius: 10px; }
    .badge-reco { background: #ecfeff; color: #0369a1; border: 1px solid #a5f3fc; font-weight: 600; }

    /* Step 1 banner (no longer used, CSS kept harmless) */
    .hero-banner { border-radius: 16px; overflow: hidden; background: #eaf2ff; border: 1px solid var(--card-border); }
    .hero-banner img { width: 100%; height: 220px; object-fit: cover; display: none; }

    /* Step 1 surface */
    .themes-surface { background: #f1f5f9; border: 1px solid var(--card-border); border-radius: 16px; padding: 18px; }

    /* Step 2 */
    .diagram-pane { background: #eaffef; border-radius: 14px; padding: 24px; }
    .box-node { border-radius: 10px; padding: 16px 18px; color: #0f172a; font-weight: 600; text-align: center; }
    .node-type { background: #bfdbfe; }
    .node-cat { background: #fde68a; }
    .node-sub { background: #fde68a; }
    .node-prod { background: #dbeafe; }
    .arrow-down { width: 2px; height: 24px; background: #64748b; margin: 8px auto; position: relative; }
    .arrow-down::after { content: ''; position: absolute; left: -4px; bottom: -6px; border: 6px solid transparent; border-top-color: #64748b; }
    .arrow-right { height: 2px; width: 56px; background: #64748b; margin: 16px auto; position: relative; }
    .arrow-right::after { content: ''; position: absolute; right: -6px; top: -6px; border: 6px solid transparent; border-left-color: #64748b; }

    /* Step 3 */
    .scroll-pane { max-height: 420px; overflow-y: auto; border-radius: 14px; background: #f1f5f9; padding: 20px; }
    .scroll-pane::-webkit-scrollbar { width: 10px; }
    .scroll-pane::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
    .preview-card { background: #fff; border: 1px solid var(--card-border); border-radius: 12px; padding: 14px; }
    .preview-img { width: 100%; height: 220px; object-fit: cover; border-radius: 10px; background: #e5e7eb; }

    .toolbar-sim { display: flex; gap: 10px; color: var(--muted); font-size: 14px; }
    .toolbar-sim .dot { width: 28px; height: 28px; border-radius: 6px; display: inline-flex; align-items: center; justify-content: center; border: 1px dashed #cbd5e1; }

    .upload-box { width: 96px; height: 96px; border-radius: 12px; border: 2px dashed #cbd5e1; background: #f8fafc; display: flex; align-items: center; justify-content: center; color: var(--muted); font-size: 12px; }

    .btn-primary { background: var(--primary-600); border-color: var(--primary-600); }
    .btn-primary:hover, .btn-primary:focus { background: var(--primary-700); border-color: var(--primary-700); }
    .btn-outline-secondary { border-radius: 10px; }

    .form-label { font-weight: 600; color: #111827; }

    @media (max-width: 768px) {
      .theme-img { height: 120px; }
      .scroll-pane { max-height: 380px; }
    }
  </style>
</head>
<body>
  <div class="wizard-wrap">
    <div class="wizard-card">
      <div class="progress mb-4">
        <div id="progressBar" class="progress-bar" role="progressbar" style="width: 33%"></div>
      </div>

      <!-- Step 1 -->
      <section id="step1" class="step-section active">
        <h3 class="mb-3">Apply a theme</h3>
        <div class="themes-surface mb-3">
          <div class="row g-4">
          <div class="col-12 col-md-4">
            <div class="theme-card h-100 p-0" data-theme="Bags theme">
              <img class="theme-img" src="https://image1.jdomni.in/preview-theme/2/5/4/0768aa51-46a2-4875-8eb5-6af3a81c8032.jpeg" alt="Bags theme">
              <div class="p-3">
                <div class="d-flex align-items-center justify-content-between">
                  <h6 class="mb-0">Bags theme</h6>
                  <span class="badge badge-reco">recommended</span>
                </div>
                <div class="mt-3">
                  <button class="btn btn-sm btn-outline-primary apply-btn select-theme">Apply</button>
                </div>
              </div>
            </div>
          </div>
          <div class="col-12 col-md-4">
            <div class="theme-card h-100 p-0" data-theme="Flex theme">
              <img class="theme-img" src="https://market-resized.envatousercontent.com/previews/files/547290543/flex-theme-preview.jpg?w=590&h=300&cf_fit=crop&crop=top&format=auto&q=85&s=0dd64d6200538c71cb2aaebd2a8b36eae660b1f27122ad2f0ab643740ddb44be" alt="Flex theme">
              <div class="p-3">
                <h6 class="mb-2">Flex theme</h6>
                <button class="btn btn-sm btn-outline-primary apply-btn select-theme">Apply</button>
              </div>
            </div>
          </div>
          <div class="col-12 col-md-4">
            <div class="theme-card h-100 p-0" data-theme="Chic theme">
              <img class="theme-img" src="https://images.unsplash.com/photo-1512436991641-6745cdb1723f?auto=format&fit=crop&w=900&q=60" alt="Chic theme">
              <div class="p-3">
                <h6 class="mb-2">Chic theme</h6>
                <button class="btn btn-sm btn-outline-primary apply-btn select-theme">Apply</button>
              </div>
            </div>
          </div>
          </div>
        </div>
        <div class="d-flex justify-content-end mt-4">
          <button id="toStep2" class="btn btn-primary px-4" disabled>Next</button>
        </div>
      </section>

      <!-- Step 2 -->
      <section id="step2" class="step-section">
        <h3 class="mb-4">Lets add a type, Category and Sub-category</h3>
        <div class="row g-4">
          <div class="col-12 col-lg-7">
            <form id="productForm">
              <div class="mb-3">
                <label class="form-label" for="productType">Add a product type</label>
                <input id="productType" class="form-control" type="text" placeholder="eg - books">
              </div>
              <div class="mb-3">
                <label class="form-label" for="category">Add a category (optional)</label>
                <input id="category" class="form-control" type="text" placeholder="eg - Academic book">
              </div>
              <div class="mb-4">
                <label class="form-label" for="subcategory">Add a sub-category (optional)</label>
                <input id="subcategory" class="form-control" type="text" placeholder="eg - medical book">
              </div>
              <div class="d-flex justify-content-between mt-2">
                <button id="backToStep1" class="btn btn-outline-secondary">Back</button>
                <button id="toStep3" class="btn btn-primary">Next</button>
              </div>
            </form>
          </div>
          <div class="col-12 col-lg-5">
            <div class="diagram-pane">
              <div class="box-node node-type">Product type</div>
              <div class="arrow-down"></div>
              <div class="box-node node-cat">Category</div>
              <div class="arrow-down"></div>
              <div class="box-node node-sub">Sub-Category</div>
              <div class="arrow-down"></div>
              <div class="box-node node-prod">Product</div>
            </div>
          </div>
        </div>
      </section>

      <!-- Step 3 -->
      <section id="step3" class="step-section">
        <h3 class="mb-3">Lets add your first product</h3>
        <div class="scroll-pane">
          <div class="row g-4">
            <!-- Left form column -->
            <div class="col-12 col-lg-7">
              <h5 class="mb-3">Basic Details</h5>
              <div class="mb-3">
                <label class="form-label" for="prodName">Product name</label>
                <input id="prodName" class="form-control" type="text" placeholder="eg - anatomy book">
              </div>
              <div class="mb-3">
                <label class="form-label" for="prodDesc">Product Description</label>
                <textarea id="prodDesc" class="form-control" rows="3" placeholder="Write a short product description"></textarea>
                <div class="toolbar-sim mt-2">
                  <span class="dot">A</span>
                  <span class="dot">B</span>
                  <span class="dot">I</span>
                  <span class="dot">Img</span>
                  <span class="dot">+</span>
                </div>
              </div>
              <div class="mb-3">
                <label class="form-label">Add Image(s)</label>
                <input type="file" id="productImageInput" accept="image/*" class="form-control" style="display: none;">
                <div class="upload-box" id="uploadBox">
                  <span id="uploadText">Upload</span>
                  <img id="uploadedImage" style="display: none; width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                </div>
                <small class="text-muted">Click the upload area to select an image</small>
              </div>
              <div class="form-check mb-3">
                <input class="form-check-input" type="checkbox" value="1" id="hasSku" checked>
                <label class="form-check-label" for="hasSku">this product has an SKU code</label>
              </div>
              <div class="mb-4">
                <input id="sku" class="form-control" type="text" placeholder="eg - PROD0001">
              </div>

              <h5 class="mb-3">Pricing Details</h5>
              <div class="form-check mb-3">
                <input class="form-check-input" type="checkbox" id="inclGst" checked>
                <label class="form-check-label" for="inclGst">price inclusive of GST</label>
              </div>
              <div class="row g-3">
                <div class="col-12 col-md-6">
                  <label class="form-label" for="netPrice">Net price</label>
                  <input id="netPrice" class="form-control" type="number" placeholder="eg - 80">
                </div>
                <div class="col-12 col-md-6">
                  <label class="form-label" for="listPrice">List price</label>
                  <input id="listPrice" class="form-control" type="number" placeholder="eg - 100">
                </div>
                <div class="col-12 col-md-6">
                  <label class="form-label" for="discount">Discount percentage</label>
                  <input id="discount" class="form-control" type="number" placeholder="eg - 40">
                </div>
                <div class="col-12 col-md-6">
                  <label class="form-label" for="gstRate">GST rate</label>
                  <input id="gstRate" class="form-control" type="number" placeholder="eg - 20">
                </div>
                <div class="col-12 col-md-6">
                  <label class="form-label" for="shipping">Shipping charges (if any)</label>
                  <input id="shipping" class="form-control" type="number" placeholder="eg - 40">
                </div>
                <div class="col-12 col-md-6">
                  <label class="form-label" for="stock">Stock level</label>
                  <input id="stock" class="form-control" type="number" placeholder="eg - 110">
                </div>
              </div>

              <div class="d-flex justify-content-between mt-4">
                <button id="backToStep2" class="btn btn-outline-secondary">Back</button>
                <button id="finishBtn" class="btn btn-success">Next</button>
              </div>
            </div>

            <!-- Right preview column -->
            <div class="col-12 col-lg-5">
              <div class="preview-card">
                <img class="preview-img mb-3" id="previewImg" src="https://images.unsplash.com/photo-1514511547117-f9c3c4e58ad4?auto=format&fit=crop&w=900&q=60" alt="preview">
                <h6 class="mb-2" id="previewTitle">Product title</h6>
                <div class="border rounded p-3 mb-2" style="min-height:120px">
                  <p class="mb-0 small text-secondary" id="previewDesc">This is a sample description. Update fields on the left to preview live.</p>
                </div>
                <div class="d-flex align-items-center gap-3">
                  <span class="text-decoration-line-through text-muted small" id="previewListPrice">RS 100</span>
                  <strong id="previewNetPrice">RS 90</strong>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Success message -->
      <section id="successStep" class="step-section text-center">
        <h4 class="mb-2">ðŸŽ‰ Onboarding Complete!</h4>
        <p class="text-secondary">Your product and pricing are saved.</p>
        <button class="btn btn-primary mt-2" onclick="location.reload()">Start Over</button>
      </section>

    </div>
  </div>

  <!-- jQuery & Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    $(function() {
      function showStep(id) { $('.step-section').removeClass('active'); $(id).addClass('active'); }
      function setProgress(p) { $('#progressBar').css('width', p + '%'); }

      // Step 1 selection
      let selectedTheme = null;
      $('.select-theme, .theme-card').on('click', function(e) {
        e.stopPropagation();
        $('.theme-card').removeClass('selected');
        // reset all apply buttons
        $('.apply-btn').removeClass('btn-success').addClass('btn-outline-primary').text('Apply');
        const card = $(this).closest('.theme-card');
        card.addClass('selected');
        selectedTheme = card.data('theme');
        const btn = card.find('.apply-btn');
        btn.removeClass('btn-outline-primary').addClass('btn-success').html('âœ“');
        $('#toStep2').prop('disabled', false);
      });
      $('#toStep2').on('click', function() { showStep('#step2'); setProgress(66); });

      // Preselect Bags theme by default
      (function preselectBags(){
        const card = $(".theme-card[data-theme='Bags theme']");
        card.addClass('selected');
        const btn = card.find('.apply-btn');
        btn.removeClass('btn-outline-primary').addClass('btn-success').html('âœ“');
        selectedTheme = 'Bags theme';
        $('#toStep2').prop('disabled', false);
      })();

      // Step 2 validation
      $('#backToStep1').on('click', function(e){ e.preventDefault(); showStep('#step1'); setProgress(33); });
      $('#toStep3').on('click', function(e){
        e.preventDefault();
        const productType = $('#productType').val().trim();
        if(!productType){ $('#productType').addClass('is-invalid'); return; }
        $('#productType').removeClass('is-invalid');
        showStep('#step3'); setProgress(100);
        setTimeout(function(){ $('.scroll-pane').animate({ scrollTop: 0 }, 200); }, 100);
      });

      // Step 3 live preview
      $('#prodName').on('input', function(){ $('#previewTitle').text($(this).val() || 'Product title'); });
      $('#prodDesc').on('input', function(){ $('#previewDesc').text($(this).val() || 'This is a sample description. Update fields on the left to preview live.'); });
      $('#netPrice').on('input', function(){ const v=$(this).val(); $('#previewNetPrice').text(v? 'RS ' + v : 'RS 90'); });
      $('#listPrice').on('input', function(){ const v=$(this).val(); $('#previewListPrice').text(v? 'RS ' + v : 'RS 100'); });

      // Image upload functionality
      $('#uploadBox').on('click', function() {
        $('#productImageInput').click();
      });

      $('#productImageInput').on('change', function() {
        const file = this.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = function(e) {
            $('#uploadedImage').attr('src', e.target.result).show();
            $('#uploadText').hide();
            // Also update the preview image on the right
            $('#previewImg').attr('src', e.target.result);
          };
          reader.readAsDataURL(file);
        }
      });

      $('#backToStep2').on('click', function(e){ e.preventDefault(); showStep('#step2'); setProgress(66); });
      $('#finishBtn').on('click', function(e){ e.preventDefault(); showStep('#successStep'); setProgress(100); });
    });
  </script>
</body>
</html>
